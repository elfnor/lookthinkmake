<!doctype html>
<html lang="">	
<head>
	<meta charset="utf-8"/>
	<title>Simple Sverchok 02 - Matrix Deform - Look Think Make</title>	
	<meta name="author" content="elfnor">
	

	<meta name="description" content="My previous post introduced some of the basic concepts of Sverchok via the "Centers Polygons" node. Here we'll try to gradually increase the complexity of our node diagram to do some more interesting things. Things that become increasingly harder to do outside Sverchok without using Blender python directly. Last ...">


	<link rel="top" href="#" /><link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic|Source+Code+Pro' rel='stylesheet' type='text/css'></link>
	<link href='http://fonts.googleapis.com/css?family=Bitter' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Rock+Salt' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="http://www.elfnor.com/theme/css/main.css" type="text/css" />
		

    <link href="http://www.elfnor.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Look Think Make Atom Feed" />
</head>
	
<body>

    <div class="container">
	  
	  <header role="banner">
	    <div class="feeds">
	        <a href="http://www.elfnor.com/feeds/all.atom.xml" rel="alternate"><img src="/theme/images/icons/feed-32px.png" alt="atom feed"/></a>
	    </div>
	      <nav class="pages">
			  <a href="http://www.elfnor.com/pages/about-me.html">About Me</a>
-			  <a href="http://www.elfnor.com/pages/galleries.html">Galleries</a>
	      </nav>
		<a href="http://www.elfnor.com" class="title">Look Think Make</a>
      </header>
	
	  <div class="wrapper">

		  <div role="main" class="content">
	<article class="full">
			
		<h1>Simple Sverchok 02 - Matrix Deform</h1>
		
<div class="metadata">
  <time datetime="2014-12-27T22:00:00" pubdate>Sat 27 December 2014</time>
    <address class="vcard author">
      by <a class="url fn" href="http://www.elfnor.com/author/elfnor.html">elfnor</a>
    </address>
  in <a href="http://www.elfnor.com/category/think.html">think</a>
<p class="tags">tagged <a href="http://www.elfnor.com/tag/make.html">make</a>, <a href="http://www.elfnor.com/tag/think.html">think</a>, <a href="http://www.elfnor.com/tag/blender.html">blender</a>, <a href="http://www.elfnor.com/tag/sverchok.html">sverchok</a></p></div>		
		<p><img alt="demo sverchok image" src="/images/flower_head_18_top.png" /></p>
<p>My  <a href="http://www.elfnor.com/simple-sverchok-01-centers-polygons.html">previous post</a> introduced some of the basic concepts of <a href="http://nikitron.cc.ua/sverchok_en.html">Sverchok</a> via the "Centers Polygons" node. </p>
<p>Here we'll try to gradually increase the complexity of our node diagram to do some more interesting things. Things that become increasingly harder to do outside Sverchok without using Blender python directly.</p>
<p>Last time we made a simple node diagram that copied one object of the scene onto the centers' of the polygons of another object in the scene. How would we apply a different scale to each of the copied objects? This scale could be random or structured in some way.</p>
<p>We know from playing last time with the "Matrix Out" and the "Text Viewer" node that the scale information is stored in the objects transform matrix. The "Centres Polygon" node produces a list of transform matrices for each of the copied objects. So to scale each object we going to intercept this list of matrices on its way from the "Centers Polygons" node to the "Viewer Draw" node.</p>
<p>A look around the nodes available finds a "Scale" node under Transforms and a "Matrix Deform" node under Matrix. </p>
<p><img alt="sverchok scale node and Matrix deform node" src="/images/scale_matrix_nodes.png" /></p>
<p>The "Scale" node has vertices as inputs and outputs. This would be useful for scaling the vertices of a single object (think of  working in "EDIT" mode) but isn't for working with the transform matrices (think of working in "OBJECT" mode).</p>
<p>The "Matrix Deform" node looks more what we want. It has matrix (blue) inputs and outputs and further inputs for location, scale,  rotation and angle. To apply an individual scale to each object we need a vector (x, y, z) for each object. This is produced in the next diagram with a "Vector" node and a "Random" node.  The X and Y scales are set to 1 and the Z scale is connected to "Random" node.  The "Random" node produces uniformly distributed numbers of the interval [0, 1].  This node diagram  randomly scales each of the copied objects in their Z directions (along the normal of the polygon they've been copied to). </p>
<p><img alt="sverchok random scale" src="/images/centers_polygons3.blend.png" /></p>
<p><img alt="sverchok random scale result" src="/images/centers_polygons3.blend_result-crop.png" /></p>
<p>Here we have set the "Count" of the "Random" node to 20 as we know that's how many faces our mesh has. If we change the mesh it would be nice if this updated automatically to the number of polygons in the mesh. This is done via the "List Length" node as shown below.</p>
<p><img alt="sverchok random scale list length" src="/images/centers_polygons4.blend.png" /></p>
<p>What if we wanted to scale the spike objects in a more structured way? Its just a matter of getting a list of scale vectors of the right length and feeding them to our matrix deform node.</p>
<p><img alt="sverchok z scale" src="/images/centers_polygons6.blend.png" /></p>
<p><img alt="sverchok z scale result" src="/images/centers_polygons6.blend_result.png" /></p>
<p>Here we've scaled the length of the cylinders by the z location of the polygon the cylinder is copied to. This is done by using a "Matrix Out" node to separate out the location of the center of each polygon, then a "Vectors Out" node to separate out just the z component of the location vector.</p>
<p>Hiding the Icosphere will show that the bottom half of the cylinders have negative scale due to the z location of their polygon being neagtive. One solution is to add a "Math" node to take the absolute value of the z location of the face before passing it to the "Matrix Deform" node.</p>
<p><img alt="sverchok abs z scale " src="/images/centers_polygons7.blend.png" />
<img alt="sverchok abs z scale result" src="/images/centers_polygons7.blend_result.png" /></p>
<p>Node diagrams can quickly look busy. To make node diagrams easier to read Frames can be added and named. Select the nodes then "Join in New Frame" from the node menu. The whole frame can then be moved around as one item.</p>
<p><img alt="sverchok abs z scale frame " src="/images/centers_polygons8.blend.png" /></p>
<p>There is also a SV Groups feature on the right hand panel of the Node Editor window. This collapses a number of nodes down to a single node.</p>
<h2>Example Image</h2>
<p><img alt="demo sverchok image" src="/images/flower_head_07.png" /></p>
<hr />	

	</article>

	<div class="comments">
	<h2>Comments !</h2>
	    <div id="disqus_thread"></div>
	    <script type="text/javascript">
	       var disqus_identifier = "simple-sverchok-02-matrix-deform.html";
	       (function() {
	       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	       dsq.src = 'http://lookthinkmake.disqus.com/embed.js';
	       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	      })();
	    </script>
	</div>

		  </div>	
		  
		  <div class="sidebar">

	        <nav>
		  <h2>Recent Posts</h2>
			<ul class="archive">
	
			      <li>
<a href="http://www.elfnor.com/simple-sverchok-04-apply-matrix.html" rel="bookmark" title="Permalink to Simple Sverchok 04 - Apply Matrix">Simple Sverchok 04 - Apply Matrix</a>
  <time datetime="2015-01-04T22:00:00" pubdate>Sun 04 January 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/simple-sverchok-03-slope-dependent-trees.html" rel="bookmark" title="Permalink to Simple Sverchok 03 - Slope Dependent Trees">Simple Sverchok 03 - Slope Dependent Trees</a>
  <time datetime="2014-12-30T22:00:00" pubdate>Tue 30 December 2014</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/simple-sverchok-02-matrix-deform.html" rel="bookmark" title="Permalink to Simple Sverchok 02 - Matrix Deform">Simple Sverchok 02 - Matrix Deform</a>
  <time datetime="2014-12-27T22:00:00" pubdate>Sat 27 December 2014</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/simple-sverchok-01-centers-polygons.html" rel="bookmark" title="Permalink to Simple Sverchok 01 - Centers Polygons">Simple Sverchok 01 - Centers Polygons</a>
  <time datetime="2014-12-20T22:00:00" pubdate>Sat 20 December 2014</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/Arduino Bread.html" rel="bookmark" title="Permalink to Arduino Bread">Arduino Bread</a>
  <time datetime="2014-12-12T22:00:00" pubdate>Fri 12 December 2014</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/notes-to-father-christmas-re-3d-printer-filament.html" rel="bookmark" title="Permalink to Notes to Father Christmas re 3D Printer Filament">Notes to Father Christmas re 3D Printer Filament</a>
  <time datetime="2014-11-30T22:00:00" pubdate>Sun 30 November 2014</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/3d-printing.html">3D Printing  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/translate-cache-descriptions-and-logs.html" rel="bookmark" title="Permalink to Translate cache descriptions and logs">Translate cache descriptions and logs</a>
  <time datetime="2014-11-16T22:00:00" pubdate>Sun 16 November 2014</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/geocaching.html">geocaching  </a></p></a>      			      </li>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	
                        </u1>
		
		</nav>

	          <h2>Categories</h2>
	          <ul class = "social">
		      <li> <a href="http://www.elfnor.com/archives.html">everything </a></li>	
	              <li ><a href="http://www.elfnor.com/category/look.html">look</a></li>
	              <li ><a href="http://www.elfnor.com/category/make.html">make</a></li>
	              <li class="active"><a href="http://www.elfnor.com/category/think.html">think</a></li>
	          </ul>
	        

	          <aside>
	          <h2>Elsewhere</h2>
			    <ul class="social">
				  <li><a href="http://elfnor.deviantart.com">on deviant art</a><i></i></li>
				  <li><a href="http://www.thingiverse.com/elfnor">on thingiverse</a><i></i></li>
				  <li><a href="https://github.com/elfnor">on github</a><i></i></li>
			    </ul>
			  </aside>

		
		  </div>

	  </div>

      <footer>
		<p role="contentinfo">
		  Â© 2013 elfnor - Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme <a href="https://github.com/fle/pelican-simplegrey"> pelican-simplegrey</a>, modified.
    	</p>

	  </footer>	

	</div>
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=9900594; 
var sc_invisible=1; 
var sc_security="efb2c43c"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="free hit
counter" href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="http://c.statcounter.com/9900594/0/efb2c43c/1/"
alt="free hit counter"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>