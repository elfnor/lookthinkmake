<!doctype html>
<html lang="">	
<head>
	<meta charset="utf-8"/>
	<title>Blender Pipe Generator - Look Think Make</title>	
	<meta name="author" content="elfnor">
	

	<meta name="description" content="Update: This lsystem/Structure Synth code has now (March 2016) been incorporated into the Sverchok Generative Art node. See the updated examples and the node docs The old windows 3D pipes screensaver has inspired many pipe generators for different graphic packages. There's even a physical version on thingiverse. But ...">


	<link rel="top" href="#" /><link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic|Source+Code+Pro' rel='stylesheet' type='text/css'></link>
	<link href='http://fonts.googleapis.com/css?family=Bitter' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Rock+Salt' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="http://www.elfnor.com/theme/css/main.css" type="text/css" />
		

    <link href="http://www.elfnor.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Look Think Make Atom Feed" />
</head>
	
<body>

    <div class="container">
	  
	  <header role="banner">
	    <div class="feeds">
	        <a href="http://www.elfnor.com/feeds/all.atom.xml" rel="alternate"><img src="/theme/images/icons/feed-32px.png" alt="atom feed"/></a>
	    </div>
	      <nav class="pages">
			  <a href="http://www.elfnor.com/pages/about-me.html">About Me</a>
-			  <a href="http://www.elfnor.com/pages/galleries.html">Galleries</a>
	      </nav>
		<a href="http://www.elfnor.com" class="title">Look Think Make</a>
      </header>
	
	  <div class="wrapper">

		  <div role="main" class="content">
	<article class="full">
			
		<h1>Blender Pipe Generator</h1>
		
<div class="metadata">
  <time datetime="2015-05-24T22:00:00+12:00" pubdate>Sun 24 May 2015</time>
    <address class="vcard author">
      by <a class="url fn" href="http://www.elfnor.com/author/elfnor.html">elfnor</a>
    </address>
  in <a href="http://www.elfnor.com/category/think.html">think</a>
<p class="tags">tagged <a href="http://www.elfnor.com/tag/make.html">make</a>, <a href="http://www.elfnor.com/tag/think.html">think</a>, <a href="http://www.elfnor.com/tag/blender.html">blender</a>, <a href="http://www.elfnor.com/tag/sverchok.html">sverchok</a>, <a href="http://www.elfnor.com/tag/structuresynth.html">structuresynth</a></p></div>		
		<p><img alt="pipes" src="./images/pipe_gen_15.png" /></p>
<p>Update: This lsystem/Structure Synth code has now (March 2016) been incorporated into the Sverchok <em>Generative Art</em> node. See the <a href="http://www.elfnor.com/generative-art-updated-examples.html">updated examples</a> and the <a href="http://www.elfnor.com/generative-art-sverchok-node-update.html">node docs</a></p>
<p>The old windows 3D pipes screensaver has inspired many pipe generators for different graphic packages. There's even a physical version on <a href="http://www.thingiverse.com/thing:25311">thingiverse</a>. But there dosen't seem to be anything similar for Blender past version 2.49. </p>
<p>Here's how to make one using the Generative Art node in Sverchok. This node is now available under Beta nodes in the latest version of Sverchok available on <a href="https://github.com/nortikin/sverchok">github</a>. Download the zip version and install like any other Blender addon.</p>
<p>The documentation for the node is <a href="https://github.com/nortikin/sverchok/blob/master/docs/nodes/generator/generative_art.rst">here</a>. See also previous posts on this blog tagged <a href="http://elfnor.com/tag/sverchok.html">sverchok</a>.</p>
<p>First of all you need to set up two basic elements a straight section and a bend. The straight section needs to go from (-0.5, 0, 0) to (0.5, 0, 0). Basically a cylinder of length 1, centered at the origin and aligned along the x-axis. The bend needs to go from (1, 0, 0) to (0, 1, 0) and have its origin at (0, 0, 0). Easiest is to start with a torus with a major radius of 1 centered at the origin, then delete 3/4 of the faces leaving only those in the positive x-y quadrant. </p>
<p>Examples of straights and bends. </p>
<p><img alt="examples of straights and bends" src="./images/straights_bends.png" /></p>
<p>Make sure any scaling done in object mode is applied (CTRL-A) to the object. Keep the number of vertices around the ends of the two elements the same for a smooth look. This will also enable the meshes to be nicely joined later if desired.</p>
<p>The following xml defines seven versions of the "R1" rule. The versions have each been labeled with the attribute "dir" to help figure out what they do. This attribute is ignored by the "Generative Art" node processor. The "straight" rule places the "s1" shape and the others place the "s2" shape.</p>
<div class="highlight"><pre><span class="nt">&lt;rules</span> <span class="na">max_depth=</span><span class="s">&quot;50&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rule</span> <span class="na">name=</span><span class="s">&quot;entry&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;call</span> <span class="na">count=</span><span class="s">&quot;4&quot;</span> <span class="na">transforms=</span><span class="s">&quot;rz 90&quot;</span> <span class="na">rule=</span><span class="s">&quot;R1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/rule&gt;</span>
    <span class="nt">&lt;rule</span> <span class="na">name=</span><span class="s">&quot;R1&quot;</span> <span class="na">weight=</span><span class="s">&quot;200&quot;</span> <span class="na">dir=</span><span class="s">&quot;straight&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;instance</span> <span class="na">transforms=</span><span class="s">&quot;tx 0.5&quot;</span> <span class="na">shape=</span><span class="s">&quot;s1&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;call</span> <span class="na">transforms=</span><span class="s">&quot;tx 0.5&quot;</span> <span class="na">rule=</span><span class="s">&quot;R1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/rule&gt;</span>

    <span class="nt">&lt;rule</span> <span class="na">name=</span><span class="s">&quot;R1&quot;</span> <span class="na">weight=</span><span class="s">&quot;10&quot;</span> <span class="na">dir=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;instance</span> <span class="na">transforms=</span><span class="s">&quot;ty -1&quot;</span> <span class="na">shape=</span><span class="s">&quot;s2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;call</span> <span class="na">transforms=</span><span class="s">&quot;tx 1 rz -90&quot;</span> <span class="na">rule=</span><span class="s">&quot;R1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/rule&gt;</span>

    <span class="nt">&lt;rule</span> <span class="na">name=</span><span class="s">&quot;R1&quot;</span> <span class="na">weight=</span><span class="s">&quot;10&quot;</span> <span class="na">dir=</span><span class="s">&quot;right&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;instance</span> <span class="na">transforms=</span><span class="s">&quot;rz -90 tx -1&quot;</span> <span class="na">shape=</span><span class="s">&quot;s2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;call</span> <span class="na">transforms=</span><span class="s">&quot;ty 1 rz 180&quot;</span> <span class="na">rule=</span><span class="s">&quot;R1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/rule&gt;</span>

    <span class="nt">&lt;rule</span> <span class="na">name=</span><span class="s">&quot;R1&quot;</span> <span class="na">weight=</span><span class="s">&quot;10&quot;</span> <span class="na">dir=</span><span class="s">&quot;up&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;instance</span> <span class="na">transforms=</span><span class="s">&quot;tz 1 rx -90&quot;</span> <span class="na">shape=</span><span class="s">&quot;s2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;call</span> <span class="na">transforms=</span><span class="s">&quot;tx 1 rz -90&quot;</span> <span class="na">rule=</span><span class="s">&quot;R1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/rule&gt;</span>

    <span class="nt">&lt;rule</span> <span class="na">name=</span><span class="s">&quot;R1&quot;</span> <span class="na">weight=</span><span class="s">&quot;10&quot;</span> <span class="na">dir=</span><span class="s">&quot;down&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;instance</span> <span class="na">transforms=</span><span class="s">&quot;tz -1 rx 90&quot;</span> <span class="na">shape=</span><span class="s">&quot;s2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;call</span> <span class="na">transforms=</span><span class="s">&quot;tx 1 rz -90&quot;</span> <span class="na">rule=</span><span class="s">&quot;R1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/rule&gt;</span>

    <span class="nt">&lt;rule</span> <span class="na">name=</span><span class="s">&quot;R1&quot;</span> <span class="na">weight=</span><span class="s">&quot;20&quot;</span> <span class="na">dir=</span><span class="s">&quot;branch&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;call</span> <span class="na">rule=</span><span class="s">&quot;R1&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;call</span> <span class="na">transforms=</span><span class="s">&quot;rz 90&quot;</span> <span class="na">rule=</span><span class="s">&quot;R1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/rule&gt;</span>

    <span class="nt">&lt;rule</span> <span class="na">name=</span><span class="s">&quot;R1&quot;</span> <span class="na">weight=</span><span class="s">&quot;1&quot;</span> <span class="na">dir=</span><span class="s">&quot;180 double bend&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;instance</span> <span class="na">transforms=</span><span class="s">&quot;tz -1 rx 90&quot;</span> <span class="na">shape=</span><span class="s">&quot;s2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;instance</span> <span class="na">transforms=</span><span class="s">&quot;rz -90&quot;</span> <span class="na">shape=</span><span class="s">&quot;s2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;call</span> <span class="na">transforms=</span><span class="s">&quot;tx 1 rz -90&quot;</span> <span class="na">rule=</span><span class="s">&quot;R1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/rule&gt;</span>

<span class="nt">&lt;/rules&gt;</span>
</pre></div>


<p>Paste the xml code into a text block in the blend file and set up a Sverchok node diagram as follows. Use the drop down on the "Generative Art" node to select the text block with the xml code. Select the straight object in the scene and use the "Get selection" button on one of the "Object In" nodes to import it into the node. Import the bend object into the other node. After doing this you may have to swap the objects over to get the pipe structure to connect up properly.</p>
<p><img alt="screenshot node setup" src="./images/pipe_gen_demo_01.blend.png" /></p>
<p>Once everything is working, play with the weights associated with each rule. This will change the structure of the pipe network. Changing the rseed value on the node will also change the random basis of the structure.</p>
<p>After changing the xml file in the text editor, the Sverchok nodes can be updated with CTRL-ENTER.</p>
<p>Decorations can be added to the network at random. First model the decorators keeping the origin for each object at (0, 0, 0). Then use the "List Shuffle" and "List Slice" nodes to select a small selection of the original matrices. Use these matrices to place the decorator objects.</p>
<p><img alt="node diagram for decorators" src="./images/pipe_gen_demo_02.blend.png" /></p>
<hr />
<p><img alt="thin pipes" src="./images/pipe_gen_thin_14.png" /></p>
<hr />	

	</article>

	<div class="comments">
	<h2>Comments !</h2>
	    <div id="disqus_thread"></div>
	    <script type="text/javascript">
	       var disqus_identifier = "blender-pipe-generator.html";
	       (function() {
	       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	       dsq.src = 'http://lookthinkmake.disqus.com/embed.js';
	       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	      })();
	    </script>
	</div>

		  </div>	
		  
		  <div class="sidebar">

	        <nav>
		  <h2>Recent Posts</h2>
			<ul class="archive">
	
			      <li>
<a href="http://www.elfnor.com/first-milky-way-photo.html" rel="bookmark" title="Permalink to First Milky Way photo">First Milky Way photo</a>
  <time datetime="2016-05-25T22:00:00+12:00" pubdate>Wed 25 May 2016</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/photo.html">photo  </a><a href="http://www.elfnor.com/tag/astro.html">astro  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/generative-art-penrose-tilings.html" rel="bookmark" title="Permalink to Generative Art - Penrose Tilings">Generative Art - Penrose Tilings</a>
  <time datetime="2016-04-23T22:00:00+12:00" pubdate>Sat 23 April 2016</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a><a href="http://www.elfnor.com/tag/structuresynth.html">structuresynth  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/generative-art-updated-examples.html" rel="bookmark" title="Permalink to Generative Art - Updated Examples">Generative Art - Updated Examples</a>
  <time datetime="2016-04-02T22:00:00+13:00" pubdate>Sat 02 April 2016</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a><a href="http://www.elfnor.com/tag/structuresynth.html">structuresynth  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/generative-art-examples-fractals-on-a-plane.html" rel="bookmark" title="Permalink to Generative Art Examples - Fractals on a Plane">Generative Art Examples - Fractals on a Plane</a>
  <time datetime="2016-03-27T22:00:00+13:00" pubdate>Sun 27 March 2016</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a><a href="http://www.elfnor.com/tag/structuresynth.html">structuresynth  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/generative-art-sverchok-node-update.html" rel="bookmark" title="Permalink to Generative Art - Sverchok Node Update">Generative Art - Sverchok Node Update</a>
  <time datetime="2016-02-28T22:00:00+13:00" pubdate>Sun 28 February 2016</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a><a href="http://www.elfnor.com/tag/structuresynth.html">structuresynth  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/maze-any-mesh-in-blender.html" rel="bookmark" title="Permalink to Maze any Mesh in Blender">Maze any Mesh in Blender</a>
  <time datetime="2016-01-29T22:00:00+13:00" pubdate>Fri 29 January 2016</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a><a href="http://www.elfnor.com/tag/maze.html">maze  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/blender-3d-maze-generator.html" rel="bookmark" title="Permalink to Blender 3D Maze Generator">Blender 3D Maze Generator</a>
  <time datetime="2015-12-20T22:00:00+13:00" pubdate>Sun 20 December 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a><a href="http://www.elfnor.com/tag/maze.html">maze  </a></p></a>      			      </li>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	
                        </u1>
		
		</nav>

	          <h2>Categories</h2>
	          <ul class = "social">
		      <li> <a href="http://www.elfnor.com/archives.html">everything </a></li>	
	              <li ><a href="http://www.elfnor.com/category/look.html">look</a></li>
	              <li ><a href="http://www.elfnor.com/category/make.html">make</a></li>
	              <li class="active"><a href="http://www.elfnor.com/category/think.html">think</a></li>
	          </ul>
	        

	          <aside>
	          <h2>Elsewhere</h2>
			    <ul class="social">
				  <li><a href="http://elfnor.deviantart.com">on deviant art</a><i></i></li>
				  <li><a href="http://www.thingiverse.com/elfnor">on thingiverse</a><i></i></li>
				  <li><a href="https://github.com/elfnor">on github</a><i></i></li>
			    </ul>
			  </aside>
                
                <h2>Tags</h2>
	
                        <ul class="tagcloud">
                            <li class="tag-3"><a href="http://www.elfnor.com/tag/markdown.html">markdown</a></li>
                            <li class="tag-3"><a href="http://www.elfnor.com/tag/pelican.html">pelican</a></li>
                            <li class="tag-4"><a href="http://www.elfnor.com/tag/nonsense.html">nonsense</a></li>
                            <li class="tag-2"><a href="http://www.elfnor.com/tag/reading.html">reading</a></li>
                            <li class="tag-1"><a href="http://www.elfnor.com/tag/blender.html">blender</a></li>
                            <li class="tag-4"><a href="http://www.elfnor.com/tag/photo.html">photo</a></li>
                            <li class="tag-3"><a href="http://www.elfnor.com/tag/ebook.html">ebook</a></li>
                            <li class="tag-4"><a href="http://www.elfnor.com/tag/kites.html">kites</a></li>
                            <li class="tag-2"><a href="http://www.elfnor.com/tag/symmetrytile.html">symmetrytile</a></li>
                            <li class="tag-3"><a href="http://www.elfnor.com/tag/3d-printing.html">3D Printing</a></li>
                            <li class="tag-3"><a href="http://www.elfnor.com/tag/cats.html">cats</a></li>
                            <li class="tag-1"><a href="http://www.elfnor.com/tag/think.html">think</a></li>
                            <li class="tag-1"><a href="http://www.elfnor.com/tag/sverchok.html">sverchok</a></li>
                            <li class="tag-3"><a href="http://www.elfnor.com/tag/python.html">python</a></li>
                            <li class="tag-4"><a href="http://www.elfnor.com/tag/webalbum.html">webalbum</a></li>
                            <li class="tag-4"><a href="http://www.elfnor.com/tag/processing.html">processing</a></li>
                            <li class="tag-3"><a href="http://www.elfnor.com/tag/materials.html">materials</a></li>
                            <li class="tag-2"><a href="http://www.elfnor.com/tag/structuresynth.html">structuresynth</a></li>
                            <li class="tag-3"><a href="http://www.elfnor.com/tag/maze.html">maze</a></li>
                            <li class="tag-3"><a href="http://www.elfnor.com/tag/copy2.html">copy2</a></li>
                            <li class="tag-3"><a href="http://www.elfnor.com/tag/geocaching.html">geocaching</a></li>
                            <li class="tag-1"><a href="http://www.elfnor.com/tag/make.html">make</a></li>
                            <li class="tag-3"><a href="http://www.elfnor.com/tag/micropython.html">micropython</a></li>
                            <li class="tag-4"><a href="http://www.elfnor.com/tag/astro.html">astro</a></li>
                        </ul>
                      
		
		  </div>

	  </div>

      <footer>
		<p role="contentinfo">
		  Â© 2013 elfnor - Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme <a href="https://github.com/fle/pelican-simplegrey"> pelican-simplegrey</a>, modified.
    	</p>

	  </footer>	

	</div>
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=9900594; 
var sc_invisible=1; 
var sc_security="efb2c43c"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="free hit
counter" href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="http://c.statcounter.com/9900594/0/efb2c43c/1/"
alt="free hit counter"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>